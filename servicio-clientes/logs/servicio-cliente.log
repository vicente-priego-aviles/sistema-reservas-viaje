2025-10-31 13:44:08 [main] INFO  d.j.r.c.ServicioClientesApplication - Starting ServicioClientesApplication using Java 21.0.7 with PID 13702 (/home/vicente/IdeaProjects/sistema-reservas-viaje/servicio-clientes/target/classes started by vicente in /home/vicente/IdeaProjects/sistema-reservas-viaje/servicio-clientes)
2025-10-31 13:44:08 [main] DEBUG d.j.r.c.ServicioClientesApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-10-31 13:44:08 [main] INFO  d.j.r.c.ServicioClientesApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-31 13:44:08 [main] WARN  i.c.c.s.p.CamundaClientPropertiesPostProcessor - Legacy property 'camunda.client.zeebe.grpc-address' found, setting to 'camunda.client.grpc-address'. Please update your setup to use the latest property
2025-10-31 13:44:08 [main] WARN  i.c.c.s.p.CamundaClientPropertiesPostProcessor - Legacy property 'camunda.client.zeebe.rest-address' found, setting to 'camunda.client.rest-address'. Please update your setup to use the latest property
2025-10-31 13:44:08 [main] INFO  i.c.c.s.p.CamundaClientPropertiesPostProcessor - Implicit 'camunda.client.auth.method'='basic' detected due to '[camunda.client.auth.username, camunda.client.auth.password]' being set.
2025-10-31 13:44:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-31 13:44:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 1 JPA repository interface.
2025-10-31 13:44:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 9080 (http)
2025-10-31 13:44:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-31 13:44:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-10-31 13:44:09 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-31 13:44:09 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1048 ms
2025-10-31 13:44:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-31 13:44:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - ClienteHikariPool - Starting...
2025-10-31 13:44:10 [main] INFO  com.zaxxer.hikari.pool.HikariPool - ClienteHikariPool - Added connection conn0: url=jdbc:h2:mem:cliente_db user=SA
2025-10-31 13:44:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - ClienteHikariPool - Start completed.
2025-10-31 13:44:10 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-31 13:44:10 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-31 13:44:11 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-31 13:44:11 [main] INFO  i.c.c.m.MicrometerMetricsRecorder - Enabling Micrometer based metrics for camunda-client (available via Actuator)
2025-10-31 13:44:11 [main] INFO  i.c.z.s.c.c.ZeebeClientProdAutoConfiguration - Creating zeebeClient using zeebeClientConfiguration [io.camunda.zeebe.spring.client.configuration.ZeebeClientConfigurationImpl@5aa16232]
2025-10-31 13:44:11 [main] WARN  i.c.z.client.impl.ZeebeClientImpl - ZeebeClient is deprecated and will be removed in version 8.10. Please migrate to io.camunda.client.CamundaClient.
2025-10-31 13:44:12 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cliente_db'
2025-10-31 13:44:12 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-10-31 13:44:12 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 9080 (http) with context path '/'
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'activarClienteWorker': [JobWorkerValue{type='activar-cliente', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@18ca3125, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'actualizarEstadoClienteWorker': [JobWorkerValue{type='actualizar-estado-cliente', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@7a792f64, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 2 Job worker(s) of bean 'actualizarInformacionTarjetaWorker': [JobWorkerValue{type='actualizar-informacion-tarjeta', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@29457ad2, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}, JobWorkerValue{type='actualizar-informacion-tarjeta', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@5a050bf9, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'actualizarRegistroClienteWorker': [JobWorkerValue{type='actualizar-registro-cliente', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@2c9d3df, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'confirmarReservaWorker': [JobWorkerValue{type='confirmar-reserva-cliente', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@5ab0b773, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'crearClienteWorker': [JobWorkerValue{type='crear-cliente', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@247113ce, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'finalizarReservaWorker': [JobWorkerValue{type='finalizar-reserva-cliente', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@a22be4c, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'iniciarReservaWorker': [JobWorkerValue{type='iniciar-reserva-cliente', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@5ad755c5, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'notificarReservaFallidaWorker': [JobWorkerValue{type='notificar-reserva-fallida', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@45ba31bc, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'notificarTarjetaInvalidaWorker': [JobWorkerValue{type='notificar-tarjeta-invalida', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@ebf11cd, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'obtenerDatosClienteWorker': [JobWorkerValue{type='obtener-datos-cliente', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@3ef8b4, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'validarClienteWorker': [JobWorkerValue{type='validar-cliente', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@727366da, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'validarDatosEntradaWorker': [JobWorkerValue{type='validar-datos-entrada', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@295d8852, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.s.a.p.JobWorkerAnnotationProcessor - Configuring 1 Job worker(s) of bean 'validarTarjetaCreditoWorker': [JobWorkerValue{type='validar-tarjeta-credito', name='', timeout=PT-0.001S, maxJobsActive=-1, requestTimeout=PT-1S, pollInterval=PT-0.001S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@8caf364, tenantIds=[], forceFetchAllVariables=false, streamEnabled=true, streamTimeout=PT1H, maxRetries=-1}]
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='activar-cliente', name='activarClienteWorker#manejarActivarCliente', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@18ca3125, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='actualizar-estado-cliente', name='actualizarEstadoClienteWorker#actualizarEstado', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@7a792f64, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] WARN  i.c.c.spring.bean.SpringMethodInfo - Parameter names of method actualizarInformacionTarjeta could not be discovered. Please set compiler flag -parameters if you rely on parameter names (e.g. for variable names to fetch from Zeebe)
2025-10-31 13:44:12 [main] WARN  i.c.c.spring.bean.SpringMethodInfo - Parameter names of method actualizarInformacionTarjeta could not be discovered. Please set compiler flag -parameters if you rely on parameter names (e.g. for variable names to fetch from Zeebe)
2025-10-31 13:44:12 [main] WARN  i.c.c.spring.bean.SpringMethodInfo - Parameter names of method actualizarInformacionTarjeta could not be discovered. Please set compiler flag -parameters if you rely on parameter names (e.g. for variable names to fetch from Zeebe)
2025-10-31 13:44:12 [main] WARN  i.c.c.spring.bean.SpringMethodInfo - Parameter names of method actualizarInformacionTarjeta could not be discovered. Please set compiler flag -parameters if you rely on parameter names (e.g. for variable names to fetch from Zeebe)
2025-10-31 13:44:12 [main] WARN  i.c.c.spring.bean.SpringMethodInfo - Parameter names of method actualizarInformacionTarjeta could not be discovered. Please set compiler flag -parameters if you rely on parameter names (e.g. for variable names to fetch from Zeebe)
2025-10-31 13:44:12 [main] WARN  i.c.c.spring.bean.SpringMethodInfo - Parameter names of method actualizarInformacionTarjeta could not be discovered. Please set compiler flag -parameters if you rely on parameter names (e.g. for variable names to fetch from Zeebe)
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='actualizar-informacion-tarjeta', name='actualizarInformacionTarjetaWorker#actualizarInformacionTarjeta', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@29457ad2, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='actualizar-informacion-tarjeta', name='actualizarInformacionTarjetaWorker#actualizarInformacionTarjeta', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@5a050bf9, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='actualizar-registro-cliente', name='actualizarRegistroClienteWorker#manejarActualizarRegistroCliente', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@2c9d3df, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='confirmar-reserva-cliente', name='confirmarReservaWorker#manejarConfirmarReserva', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@5ab0b773, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='crear-cliente', name='crearClienteWorker#manejarCrearCliente', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@247113ce, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='finalizar-reserva-cliente', name='finalizarReservaWorker#manejarFinalizarReserva', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@a22be4c, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='iniciar-reserva-cliente', name='iniciarReservaWorker#manejarIniciarReserva', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@5ad755c5, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='notificar-reserva-fallida', name='notificarReservaFallidaWorker#notificarReservaFallida', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@45ba31bc, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='notificar-tarjeta-invalida', name='notificarTarjetaInvalidaWorker#notificarTarjetaInvalida', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@ebf11cd, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='obtener-datos-cliente', name='obtenerDatosClienteWorker#manejarObtenerDatosCliente', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@3ef8b4, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='validar-cliente', name='validarClienteWorker#manejarValidarCliente', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@727366da, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='validar-datos-entrada', name='validarDatosEntradaWorker#validarDatosEntrada', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@295d8852, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  i.c.c.jobhandling.JobWorkerManager - . Starting job worker: JobWorkerValue{type='validar-tarjeta-credito', name='validarTarjetaCreditoWorker#manejarValidarTarjetaCredito', timeout=PT5M, maxJobsActive=32, requestTimeout=PT-1S, pollInterval=PT0.1S, autoComplete=true, fetchVariables=[], enabled=true, methodInfo=io.camunda.client.spring.bean.SpringMethodInfo@8caf364, tenantIds=[<default>], forceFetchAllVariables=false, streamEnabled=false, streamTimeout=PT1H, maxRetries=-1}
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - Started ServicioClientesApplication in 3.996 seconds (process running for 4.219)
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - 
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - ============================================
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - 👤 Servicio de Clientes INICIADO
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - ============================================
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - 📊 Puerto: 9080
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - 📖 Swagger UI: http://localhost:9080/swagger-ui.html
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - 🔍 H2 Console: http://localhost:9080/h2-console
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - 💚 Health: http://localhost:9080/actuator/health
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - ============================================
2025-10-31 13:44:12 [main] INFO  d.j.r.c.ServicioClientesApplication - 
2025-10-31 13:45:33 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ValidarDatosEntradaWorker - ✅ Iniciando validación de datos de entrada - Job: 2251799813852922
2025-10-31 13:45:33 [pool-2-thread-1] DEBUG d.j.r.c.i.a.e.c.ValidarDatosEntradaWorker - 🔍 Variables recibidas: [reservaId, numeroPasajeros, clienteId, fechaInicio, emailContacto, destino, telefonoContacto, fechaFin]
2025-10-31 13:45:33 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ValidarDatosEntradaWorker - ✅ Datos de entrada válidos - Cliente: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:03 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ObtenerDatosClienteWorker - 🚀 Iniciando worker obtener-datos-cliente - Job Key: 2251799813852987
2025-10-31 13:46:03 [pool-2-thread-1] DEBUG d.j.r.c.i.a.e.c.ObtenerDatosClienteWorker - 🔍 Variables recibidas: {reservaId=7b054bc6-b657-11f0-95bb-96c9b4bd85be, numeroPasajeros=2, clienteId=123e4567-e89b-12d3-a456-426655440000, fechaInicio=2025-12-10, erroresValidacion=[], emailContacto=cliente@example.com, destino=Roma, advertencias=[], telefonoContacto=+34600123456, fechaFin=2025-12-20, datosValidos=true}
2025-10-31 13:46:03 [pool-2-thread-1] DEBUG d.j.r.c.i.a.e.c.ObtenerDatosClienteWorker - ✅ ClienteId validado: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:03 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ObtenerDatosClienteWorker - 🔍 Obteniendo datos del cliente: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:03 [pool-2-thread-1] DEBUG d.j.r.c.a.servicio.ClienteServicio - 🔍 Buscando cliente por ID: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:03 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - 🔍 Buscando cliente por ID: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:03 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - ✅ Cliente encontrado: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:03 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ObtenerDatosClienteWorker - ✅ Cliente encontrado: 123e4567-e89b-12d3-a456-426655440000 - Estado: ACTIVO - Email: juan.perez@example.com
2025-10-31 13:46:03 [pool-2-thread-1] DEBUG d.j.r.c.i.a.e.c.ObtenerDatosClienteWorker - ✅ Output construido con 13 variables
2025-10-31 13:46:03 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ObtenerDatosClienteWorker - 📤 Datos del cliente preparados - Tarjetas: 1 - Puede reservar: true
2025-10-31 13:46:34 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - 🚀 Iniciando worker validar-tarjeta-credito - Job Key: 2251799813853084
2025-10-31 13:46:34 [pool-2-thread-1] DEBUG d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - 🔍 Variables recibidas: {reservaId=7b054bc6-b657-11f0-95bb-96c9b4bd85be, emailCliente=juan.perez@example.com, paisCliente=España, estadoCliente=ACTIVO, numeroPasajeros=2, ciudadCliente=Madrid, emailContacto=cliente@example.com, telefonoCliente=+34600123456, estaBloqueado=false, dniCliente=123****8Z, nombreCompleto=Juan Pérez García, fechaFin=2025-12-20, datosValidos=true, cantidadTarjetas=1, clienteId=123e4567-e89b-12d3-a456-426655440000, fechaInicio=2025-12-10, erroresValidacion=[], tieneTarjetasValidas=true, destino=Roma, advertencias=[], clienteObtenido=true, telefonoContacto=+34600123456, puedeRealizarPagos=true}
2025-10-31 13:46:34 [pool-2-thread-1] DEBUG d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - ⚠️ No se proporcionó montoReserva, usando monto por defecto para validación
2025-10-31 13:46:34 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - 💳 Validando tarjeta de crédito para cliente: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:34 [pool-2-thread-1] DEBUG d.j.r.c.a.servicio.ClienteServicio - 🔍 Buscando cliente por ID: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:34 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - 🔍 Buscando cliente por ID: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:34 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - ✅ Cliente encontrado: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:46:34 [pool-2-thread-1] DEBUG d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - ✅ Cliente tiene 1 tarjeta(s) registrada(s)
2025-10-31 13:46:34 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - 🔍 Tarjeta seleccionada: 11111111-1111-1111-1111-000000000001 - Tipo: VISA - Últimos 4 dígitos: 0366
2025-10-31 13:46:34 [pool-2-thread-1] DEBUG d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - ✅ Fecha de expiración válida: 12/2027
2025-10-31 13:46:34 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - 🔐 Simulando validación con pasarela de pago - Monto: 1000.0€
2025-10-31 13:46:34 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - ✅ Pasarela de pago: Transacción APROBADA - Código: AFDD91
2025-10-31 13:46:34 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - ✅ Tarjeta validada correctamente - Código autorización: AFDD91
2025-10-31 13:46:34 [pool-2-thread-1] DEBUG d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - ✅ Output construido con 7 variables
2025-10-31 13:46:34 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ValidarTarjetaCreditoWorker - 📤 Validación completada exitosamente
2025-10-31 13:47:04 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ActualizarEstadoClienteWorker - 🔄 Iniciando actualización de estado de cliente - Job: 2251799813853177
2025-10-31 13:47:04 [pool-2-thread-1] INFO  d.j.r.c.i.a.e.c.ActualizarEstadoClienteWorker - 🔍 Actualizando estado de cliente: 123e4567-e89b-12d3-a456-426655440000 → Estado nuevo: EN_PROCESO_RESERVA - Reserva: 7b054bc6-b657-11f0-95bb-96c9b4bd85be
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.a.servicio.ClienteServicio - 🔍 Obteniendo estado del cliente: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - 🔍 Buscando cliente por ID: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - ✅ Cliente encontrado: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.a.servicio.ClienteServicio - 📊 Estado del cliente 123e4567-e89b-12d3-a456-426655440000: ACTIVO
2025-10-31 13:47:04 [pool-2-thread-1] INFO  d.j.r.c.a.servicio.ClienteServicio - 🚀 Iniciando proceso de reserva para cliente: 123e4567-e89b-12d3-a456-426655440000 - Reserva: 7b054bc6-b657-11f0-95bb-96c9b4bd85be
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - 🔍 Buscando cliente por ID: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - ✅ Cliente encontrado: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.d.modelo.agregado.Cliente - 🔍 Iniciando proceso de reserva para cliente: 123e4567-e89b-12d3-a456-426655440000 - Reserva: 7b054bc6-b657-11f0-95bb-96c9b4bd85be
2025-10-31 13:47:04 [pool-2-thread-1] INFO  d.j.r.c.d.modelo.agregado.Cliente - 🚀 Proceso de reserva iniciado para cliente: 123e4567-e89b-12d3-a456-426655440000 - Reserva: 7b054bc6-b657-11f0-95bb-96c9b4bd85be
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - 💾 Guardando cliente: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - 🔄 Actualizando cliente existente: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - 🔄 Actualizando datos de entidad existente
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - 🔄 Sincronizando tarjetas del cliente
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - ✅ Tarjetas sincronizadas: 1 tarjetas
2025-10-31 13:47:04 [pool-2-thread-1] DEBUG d.j.r.c.i.a.s.p.a.ClienteRepositorioAdaptador - ✅ Cliente guardado exitosamente: 123e4567-e89b-12d3-a456-426655440000
2025-10-31 13:47:04 [pool-2-thread-1] ERROR d.j.r.c.i.a.e.c.ActualizarEstadoClienteWorker - ❌ Datos de entrada inválidos: El valor encriptado no es válido: Illegal base64 character 2a
2025-10-31 13:48:32 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-31 13:48:32 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-31 13:48:37 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-31 13:48:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ClienteHikariPool - Shutdown initiated...
2025-10-31 13:48:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - ClienteHikariPool - Shutdown completed.
